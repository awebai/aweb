{"id":"aweb-2n8","title":"Prepare aweb for PyPI publication","description":"Fix all issues needed before publishing aweb to PyPI: duplicate migrations in wheel, missing routes/__init__.py, missing project.urls/classifiers, add dep minimum versions, rework README for consumers.","status":"in_progress","priority":1,"issue_type":"task","owner":"juan@juanreyero.com","created_at":"2026-02-03T23:08:15.096555Z","created_by":"Juan Reyero","updated_at":"2026-02-03T23:08:18.432366Z"}
{"id":"aweb-91t","title":"Restore heartbeat endpoint lost in beadhub refactoring","description":"POST /v1/workspaces/heartbeat was dropped when beadhub was refactored from beadhub-main. The presence.py module and its tests survived intact, and routes that call into presence (register, mcp, status, agent listing) still work. But the heartbeat endpoint itself (~249 lines in beadhub-main workspaces.py lines 518-766) is missing.\n\nThe heartbeat endpoint is what the bdh CLI calls to refresh workspace presence. Without it, presence data goes stale and is never refreshed.\n\nReference implementation: beadhub-main/src/beadhub/routes/workspaces.py (search for 'heartbeat').\nRefactored codebase missing it: beadhub/src/beadhub/routes/workspaces.py.\n\nSteps the endpoint performs:\n1. Extract project_id from auth\n2. Pre-check workspace immutability (project_id + alias match)\n3. Resolve/create repo record (normalize git origin)\n4. Upsert workspace record in SQL (immutability constraints, alias collision check via DB + Redis)\n5. Update presence in Redis (best-effort) — hash + secondary indexes\n6. Cloud-only: track usage (non-blocking)\n7. Return OK\n\nPhilosophy: presence is a cache of SQL. SQL authoritative, Redis ephemeral.\n\nNote: only restore the beadhub-specific heartbeat. We discussed with Juan whether presence should live in aweb — conclusion is that workspace-level presence is beadhub-specific (repos, branches, workspace paths). Generic agent-level presence for aweb is a separate future concern.","status":"closed","priority":1,"issue_type":"bug","owner":"juan@juanreyero.com","created_at":"2026-02-04T09:27:12.392001Z","created_by":"Juan Reyero","updated_at":"2026-02-04T09:27:57.213214Z","closed_at":"2026-02-04T09:27:57.213214Z","close_reason":"Created in wrong beads database (aweb instead of beadhub). Grace will create the issue in beadhub's beads."}
{"id":"aweb-acs","title":"aweb: replace assert with explicit check in chat session creation","status":"closed","priority":2,"issue_type":"bug","owner":"juan@juanreyero.com","created_at":"2026-02-03T13:57:43.667323Z","created_by":"Juan Reyero","updated_at":"2026-02-03T14:08:13.753577Z","closed_at":"2026-02-03T14:08:13.753577Z","close_reason":"Replaced assert with explicit check + HTTPException(500) + logging in _ensure_session()"}
{"id":"aweb-col","title":"aweb: fail fast when proxy headers trusted but internal secret missing","status":"closed","priority":1,"issue_type":"bug","owner":"juan@juanreyero.com","created_at":"2026-02-03T13:57:43.044041Z","created_by":"Juan Reyero","updated_at":"2026-02-03T14:05:48.098992Z","closed_at":"2026-02-03T14:05:48.098992Z","close_reason":"Removed SESSION_SECRET_KEY fallback from _get_aweb_internal_auth_secret(); added validate_auth_config() for startup checks; added logging on runtime failure; added 5 tests to lock behavior"}
{"id":"aweb-gkv","title":"Add agent-level presence and heartbeat to aweb","description":"aweb currently has no presence tracking. During PyPI prep we analyzed the presence implementation in beadhub-main and concluded:\n\n- Workspace-level presence (repos, branches, workspace paths) is beadhub-specific — Grace is restoring the lost heartbeat endpoint there (beadhub-skjc).\n- Agent-level presence ('is agent X online?') is generic coordination and belongs in aweb.\n\nWhen there's a real consumer (e.g. aw client wanting to show who's online, or chat wanting to show availability), aweb should get:\n- A simple heartbeat endpoint for agents to report liveness\n- Redis-backed presence with TTL\n- Query API: who's online in project X?\n\nThis is lower priority than the beadhub regression fix. File for when we have a concrete use case beyond beadhub's workspace presence.","status":"open","priority":3,"issue_type":"feature","owner":"juan@juanreyero.com","created_at":"2026-02-04T09:30:28.174748Z","created_by":"Juan Reyero","updated_at":"2026-02-04T09:30:28.174748Z"}
